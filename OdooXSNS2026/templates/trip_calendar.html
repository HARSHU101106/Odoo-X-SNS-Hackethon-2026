<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>Itinerary Calendar</title>
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.2/css/all.min.css"
    />
    <style>
      body {
        background: #0f172a;
        color: #e5e7eb;
        font-family: "Segoe UI", Tahoma, Geneva, Verdana, sans-serif;
        margin: 0;
        padding: 0;
      }

      .container {
        background: #2c2c2c;
        border-radius: 15px;
        padding: 20px;
        max-width: 650px;
        margin: 30px auto;
        box-shadow: 0 4px 20px rgba(0, 0, 0, 0.6);
      }

      /* Top Controls */
      .top-controls {
        display: flex;
        gap: 10px;
        margin-bottom: 20px;
        flex-wrap: wrap;
      }

      .top-controls input,
      .top-controls select,
      .top-controls button {
        padding: 8px 12px;
        border-radius: 10px;
        border: none;
        font-size: 14px;
        cursor: pointer;
        transition: 0.3s;
      }

      .top-controls input {
        flex: 2;
        background: #444;
        color: #fff;
      }

      .top-controls input::placeholder {
        color: #bbb;
      }

      .top-controls select {
        background: #444;
        color: #fff;
      }

      .top-controls select:hover {
        background: #f39c12;
        color: #fff;
      }

      .top-controls button {
        background: #5a9cb5;
        color: #fff;
        display: flex;
        align-items: center;
        gap: 5px;
        font-weight: 500;
      }

      .top-controls button:hover {
        background: #e67e22;
      }

      /* Calendar Header */
      .calendar-header {
        display: flex;
        justify-content: space-between;
        align-items: center;
        margin-bottom: 15px;
      }

      .calendar-header h4,
      .calendar-header h5 {
        cursor: pointer;
        padding: 8px 12px;
        border-radius: 8px;
        transition: background 0.3s;
        display: flex;
        align-items: center;
        gap: 6px;
      }

      .calendar-header h4:hover,
      .calendar-header h5:hover {
        background: #444;
      }

      /* Month / Year Picker */
      .picker {
        display: grid;
        grid-template-columns: repeat(4, 1fr);
        gap: 8px;
        margin: 10px 0;
      }

      .picker .btn {
        background: #444;
        color: #fff;
        border: none;
        padding: 8px 10px;
        border-radius: 8px;
        cursor: pointer;
        font-weight: 500;
        transition: background 0.3s;
        display: flex;
        justify-content: center;
        align-items: center;
        gap: 5px;
      }

      .picker .btn:hover {
        background: #f39c12;
      }

      /* Calendar Grid */
      .calendar-grid {
        display: grid;
        gap: 5px;
      }

      .days {
        grid-template-columns: repeat(7, 1fr);
        margin-bottom: 5px;
      }

      .days div {
        font-weight: bold;
        text-align: center;
        font-size: 14px;
        color: #aaa;
      }

      .dates {
        grid-template-columns: repeat(7, 1fr);
      }

      .date {
        background: #3a3a3a;
        border-radius: 10px;
        min-height: 80px;
        padding: 6px;
        font-size: 14px;
        cursor: pointer;
        display: flex;
        flex-direction: column;
        justify-content: space-between;
        transition: transform 0.2s, background 0.2s;
        position: relative;
      }

      .date:hover {
        background: #555;
        transform: translateY(-3px);
      }

      .date.empty {
        background: transparent;
        cursor: default;
      }

      .event {
        margin-top: 5px;
        font-size: 11px;
        color: #fff;
        border-radius: 6px;
        padding: 2px 4px;
        text-align: center;
        display: flex;
        justify-content: center;
        align-items: center;
        gap: 3px;
        font-weight: bold;
      }

      .event.upcoming {
        background: #f39c12;
      } /* orange */
      .event.completed {
        background: #27ae60;
      } /* green */

      /* Modal */
      #tripModal {
        display: none;
        position: fixed;
        top: 50%;
        left: 50%;
        width: 90%;
        max-width: 450px;
        background: #2c2c2c;
        color: #fff;
        transform: translate(-50%, -50%);
        border-radius: 15px;
        padding: 20px;
        z-index: 1000;
        box-shadow: 0 6px 20px rgba(0, 0, 0, 0.7);
      }

      #modalOverlay {
        display: none;
        position: fixed;
        top: 0;
        left: 0;
        right: 0;
        bottom: 0;
        background: rgba(0, 0, 0, 0.7);
        z-index: 900;
      }

      .modal-header,
      .modal-footer {
        display: flex;
        justify-content: space-between;
        align-items: center;
      }

      .modal-header h5 {
        margin: 0;
        display: flex;
        align-items: center;
        gap: 8px;
      }

      .btn {
        padding: 6px 12px;
        cursor: pointer;
        border: none;
        background: #f39c12;
        color: #fff;
        border-radius: 8px;
        font-weight: 500;
        transition: background 0.3s;
        display: flex;
        align-items: center;
        gap: 5px;
      }

      .btn:hover {
        background: #e67e22;
      }

      .list-group {
        list-style: none;
        padding: 0;
        margin: 0;
        max-height: 150px;
        overflow-y: auto;
      }

      .list-group-item {
        border: 1px solid #555;
        padding: 6px 8px;
        margin: 4px 0;
        border-radius: 8px;
        display: flex;
        justify-content: space-between;
        align-items: center;
        background: #3a3a3a;
      }

      .btn-remove {
        color: #e74c3c;
        font-weight: bold;
        cursor: pointer;
      }

      input,
      select {
        background: #444;
        border: none;
        padding: 8px;
        color: #fff;
        border-radius: 8px;
        margin-bottom: 5px;
        width: 100%;
      }

      input::placeholder {
        color: #bbb;
      }
    </style>
  </head>
  <body>
    <div class="container">
      <!-- Top Controls -->
      <div class="top-controls">
        <input placeholder="Search trips..." />
        <button><i class="fa fa-layer-group"></i> Group</button>
        <button><i class="fa fa-filter"></i> Filter</button>
        <button><i class="fa fa-sort"></i> Sort</button>
      </div>

      <!-- Calendar Header -->
      <div class="calendar-header">
        <h4 id="monthBtn" onclick="showMonths()">
          <i class="fa fa-calendar-days"></i> Month
        </h4>
        <h5 id="yearBtn" onclick="showYears()">
          <i class="fa fa-calendar"></i> Year
        </h5>
      </div>

      <!-- Month / Year Picker -->
      <div id="picker" class="picker"></div>

      <!-- Calendar -->
      <div class="calendar-grid days">
        <div>SUN</div>
        <div>MON</div>
        <div>TUE</div>
        <div>WED</div>
        <div>THU</div>
        <div>FRI</div>
        <div>SAT</div>
      </div>
      <div class="calendar-grid dates" id="calendar"></div>
    </div>

    <!-- Modal Overlay -->
    <div id="modalOverlay"></div>

    <!-- Trip Modal -->
    <div id="tripModal">
      <div class="modal-header">
        <h5><i class="fa fa-plane-departure"></i> Add Trip / Plan</h5>
        <span class="btn" onclick="closeModal()"
          ><i class="fa fa-times"></i
        ></span>
      </div>
      <div class="modal-body">
        <input id="tripTitle" placeholder="Trip Title" />
        <select id="tripStatus">
          <option value="upcoming">Upcoming</option>
          <option value="completed">Completed</option>
        </select>
        <ul id="activityList" class="list-group"></ul>
        <div style="display: flex; gap: 5px; margin-top: 5px">
          <input id="activityInput" placeholder="Add activity" />
          <button class="btn" onclick="addActivity()">
            <i class="fa fa-plus"></i>
          </button>
        </div>
      </div>
      <div class="modal-footer" style="justify-content: space-between">
        <button class="btn" onclick="saveTrip()">
          <i class="fa fa-save"></i> Save
        </button>
        <button class="btn" onclick="deleteTrip()">
          <i class="fa fa-trash"></i> Delete
        </button>
        <button class="btn" onclick="closeModal()">
          <i class="fa fa-times"></i> Cancel
        </button>
      </div>
    </div>

    <script>
      let currentDate = new Date();
      let selectedDate = "";
      let trips = {};

      const calendar = document.getElementById("calendar");
      const picker = document.getElementById("picker");
      const tripModal = document.getElementById("tripModal");
      const modalOverlay = document.getElementById("modalOverlay");

      function renderCalendar() {
        calendar.innerHTML = "";
        const year = currentDate.getFullYear();
        const month = currentDate.getMonth();

        document.getElementById(
          "monthBtn"
        ).innerHTML = `<i class="fa fa-calendar-days"></i> ${currentDate.toLocaleString(
          "default",
          { month: "long" }
        )}`;
        document.getElementById(
          "yearBtn"
        ).innerHTML = `<i class="fa fa-calendar"></i> ${year}`;

        const firstDay = new Date(year, month, 1).getDay();
        const totalDays = new Date(year, month + 1, 0).getDate();

        for (let i = 0; i < firstDay; i++) {
          calendar.innerHTML += `<div class="date empty"></div>`;
        }

        for (let day = 1; day <= totalDays; day++) {
          const key = `${year}-${month + 1}-${day}`;
          const trip = trips[key];
          let eventHtml = "";
          if (trip)
            eventHtml = `<div class="event ${trip.status}"><i class="fa fa-plane"></i> ${trip.title}</div>`;
          calendar.innerHTML += `<div class="date" onclick="openModal('${key}')">
      <strong>${day}</strong>
      ${eventHtml}
    </div>`;
        }
      }

      function showMonths() {
        picker.innerHTML = "";
        for (let i = 0; i < 12; i++) {
          picker.innerHTML += `<button class="btn" onclick="setMonth(${i})">${new Date(
            0,
            i
          ).toLocaleString("default", { month: "short" })}</button>`;
        }
      }

      function showYears() {
        picker.innerHTML = "";
        for (let y = 2020; y <= 2035; y++) {
          picker.innerHTML += `<button class="btn" onclick="setYear(${y})">${y}</button>`;
        }
      }

      function setMonth(m) {
        currentDate.setMonth(m);
        picker.innerHTML = "";
        renderCalendar();
      }
      function setYear(y) {
        currentDate.setFullYear(y);
        picker.innerHTML = "";
        renderCalendar();
      }

      function openModal(date) {
        selectedDate = date;
        const activityList = document.getElementById("activityList");
        const tripTitle = document.getElementById("tripTitle");
        const tripStatus = document.getElementById("tripStatus");
        activityList.innerHTML = "";
        tripTitle.value = "";
        tripStatus.value = "upcoming";

        if (trips[date]) {
          const trip = trips[date];
          tripTitle.value = trip.title;
          tripStatus.value = trip.status;
          trip.activities.forEach((a) => addActivityToList(a));
        }

        tripModal.style.display = "block";
        modalOverlay.style.display = "block";
      }

      function closeModal() {
        tripModal.style.display = "none";
        modalOverlay.style.display = "none";
      }

      function addActivity() {
        const input = document.getElementById("activityInput");
        if (!input.value) return;
        addActivityToList(input.value);
        input.value = "";
      }

      function addActivityToList(activity) {
        const list = document.getElementById("activityList");
        const li = document.createElement("li");
        li.className = "list-group-item";
        li.innerHTML = `${activity} <span class="btn-remove" onclick="removeActivity(this)"><i class="fa fa-trash"></i></span>`;
        list.appendChild(li);
      }

      function removeActivity(el) {
        el.parentElement.remove();
      }

      function saveTrip() {
        const tripTitle = document.getElementById("tripTitle");
        const list = document.getElementById("activityList");
        const tripStatus = document.getElementById("tripStatus").value;
        if (!tripTitle.value) {
          alert("Trip title cannot be empty");
          return;
        }

        trips[selectedDate] = {
          title: tripTitle.value,
          status: tripStatus,
          activities: [...list.children].map((li) =>
            li.innerText.replace("Ã—", "").trim()
          ),
        };

        renderCalendar();
        closeModal();
      }

      function deleteTrip() {
        if (trips[selectedDate]) {
          if (confirm("Are you sure you want to delete this trip?")) {
            delete trips[selectedDate];
            renderCalendar();
            closeModal();
          }
        }
      }

      renderCalendar();
    </script>
  </body>
</html>
